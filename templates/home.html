{% extends 'base.html' %}
{% block content %}

<div class="row card-panel grey lighten-5">
	<form action="{{ url_for('search') }}" method="post" class="col s12">
		<div class="row valign-wrapper center-align">
			<div class="input-field col s12 m8">
				<input type="text" name="search" id="search" minlength="5" class="validate" required>
				<label for="search">Search Post</label>
			</div>
			<div class="col s12 m4">
				<a href="{{ url_for('home') }}" class="red btn text-shadow">Reset</a>
				<button type="submit" class="light-blue darken-1 btn text-shadow">
                        <i class="fas fa-search left"></i> Search
                    </button>
			</div>
		</div>
	</form>
</div>

<h1>my blog post</h1>
{% if posts|length > 0 %}
{% for post in posts %}
<div class="card horizontal">
	<div class="card-image">
		<img src="{{post.post_image}}">
        </div>
		<div class="card-stacked">
			<div class="card-content">

				<h1> {{post.post_title}}</h1>
				<p>{{post.post_content}}</p>
				<p>Read Time: {{post.read_time}}</p>
				<p>Created by {{post.created_by}} </p>
				<p>Posted On {{post.created_at}} </p>
				<div class="col s3">
					{% if session.user|lower == post.created_by|lower %}
					<button data-target="modal1" class="btn red modal-trigger">Delete</button>
					<a href="{{ url_for('edit_post', post_id=post._id) }}" class="btn light-blue lighten-1">Edit</a>
					{% endif %}
					<a href="{{ url_for('view_post', post_id=post._id) }}" class="btn light-blue lighten-1">View
						Post</a>
				</div>

			</div>
		</div>
	</div>
</div>

	<!-- Modal Structure -->
	<div id="modal1" class="modal">
		<div class="modal-content">
			<h4>DELETE POST</h4>
			<p>ARE YOU SURE YOU WANT TO DELETE THIS POST?</p>
		</div>
		<div class="modal-footer">
			<button  class="btn modal-close">Cancel</button>
			<a href="{{ url_for('delete_post', post_id=post._id) }}"
				class="btn red modal-close waves-effect waves-green btn-flat">Delete</a>
		</div>
	</div>

	{% endfor %}
	{% else %}
	<h3 class="red-text center-align">No Results Found</h3>
	{% endif %}
	{% endblock %}